import{a as S,b as D,u as E,r as i,o as L,j as e,m as I,e as u,d as g,f as p,h as P}from"./index-BjUV0rAk.js";const R=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-green-400",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),$=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),W=()=>e.jsx("div",{className:"bg-slate-900 min-h-screen text-white p-4 md:p-8 animate-pulse",children:e.jsxs("div",{className:"container mx-auto max-w-7xl pt-20",children:[e.jsx("div",{className:"h-10 bg-slate-800 rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-6 bg-slate-800 rounded w-1/2 mb-8"}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsx("div",{className:"h-96 bg-slate-800 rounded-2xl"})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"bg-slate-800/50 h-64 rounded-2xl"})})]})]})});function T(){const{id:t}=S(),l=D(),{showNotification:o}=E(),[s,f]=i.useState(null),[b,c]=i.useState(!0),[d,x]=i.useState(!1),[j,N]=i.useState(null);i.useEffect(()=>{const r=async a=>{if(!t){c(!1);return}c(!0),x(!1);try{const h=u(g,"courses",t),m=await p(h);if(m.exists()){if(f({id:m.id,...m.data()}),a){if(N(a),a.uid.startsWith("mock-uid-")){x(!1);return}const y=u(g,"registrations",`${a.uid}_${t}`),C=await p(y);x(C.exists())}}else o("Course not found.","error"),l("/")}catch(h){console.error("Error fetching course data: ",h),o("Failed to load course details.","error")}finally{c(!1)}},n=sessionStorage.getItem("mockUser");if(n)r(JSON.parse(n));else{const a=L(P,r);return()=>a()}},[t,l,o]);const v=()=>{if(!j){localStorage.setItem("intendedPath",`/course/${t}`),o("Please log in to register for a course.","info"),l("/student-login");return}d?(o("You are already enrolled in this course.","info"),l("/student-home")):l(`/register/${t}`)};if(b)return e.jsx(W,{});if(!s)return null;const w=d?"Go to Dashboard":"Register Now",k=d?"w-full bg-green-600 hover:bg-green-700 text-white font-semibold text-lg py-3 px-4 rounded-xl":"w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold text-lg py-3 px-4 rounded-xl";return e.jsx(I.div,{className:"bg-slate-900 text-white pt-12 pb-12 md:pt-20 md:pb-20",initial:{opacity:0},animate:{opacity:1},children:e.jsxs("div",{className:"container mx-auto max-w-7xl px-6",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold mb-2",children:s.name}),e.jsxs("div",{className:"flex items-center text-slate-400 text-lg",children:[e.jsx($,{}),e.jsxs("span",{className:"ml-2",children:["Taught by ",s.instructor]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 lg:gap-12 mt-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("div",{className:"rounded-2xl overflow-hidden mb-8",children:e.jsx("img",{src:s.thumbnail||`https://placehold.co/800x450/1e1b4b/ffffff?text=${s.name}`,alt:s.name,className:"w-full h-auto object-cover"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-4",children:"About This Course"}),e.jsx("p",{className:"text-slate-300 leading-relaxed mb-8",children:s.description}),e.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-4",children:"What You'll Learn"}),s.highlights&&s.highlights.length>0&&e.jsx("ul",{className:"space-y-3",children:s.highlights.map((r,n)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx(R,{})}),e.jsx("span",{className:"ml-3 text-slate-300",children:r})]},n))})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-2xl p-6 md:p-8 shadow-lg sticky top-28",children:[e.jsx("h2",{className:"text-2xl font-bold mb-5 text-center text-white",children:"Enroll Now"}),e.jsxs("div",{className:"text-center mb-5",children:[e.jsxs("p",{className:"text-5xl font-extrabold text-white",children:["₹",s.earlyBirdPrice]}),e.jsxs("p",{className:"text-xl line-through text-slate-400 mt-1",children:["₹",s.basePrice]})]}),e.jsx("p",{className:"text-sm text-center text-green-400 font-medium mb-6",children:s.discountNote||"Special early bird price available!"}),e.jsx("button",{onClick:v,className:k,children:w})]})})]})]})})}export{T as default};
