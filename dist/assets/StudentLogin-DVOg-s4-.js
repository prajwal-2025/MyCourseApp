import{r as m,u as x,a as h,j as e}from"./index-DGNH6TTz.js";import{q as g,c as f,d as b,w as y,g as v}from"./firebase-DP6Zpsn6.js";const w=()=>{const[t,u]=m.useState(""),[i,r]=m.useState(!1),l=x(),{showNotification:s}=h(),p=async n=>{if(n.preventDefault(),r(!0),!/^\d{10}$/.test(t)){s("Please enter a valid 10-digit phone number.","error"),r(!1);return}try{const o=g(f(b,"registrations"),y("phone","==",t)),c=await v(o),d=sessionStorage.getItem("redirectUrl");if(sessionStorage.removeItem("redirectUrl"),c.empty)sessionStorage.setItem("student",JSON.stringify({phone:t,name:""})),s("Welcome! Please complete your registration to proceed.","info"),l(d||"/");else{const a=c.docs[0].data();sessionStorage.setItem("student",JSON.stringify({phone:a.phone,name:a.name})),s(`Welcome back, ${a.name}!`,"success"),l(d||"/student-home")}}catch(o){s("An error occurred. Please try again.","error"),console.error("Login error:",o)}finally{r(!1)}};return e.jsx("div",{className:"min-h-[80vh] flex items-center justify-center bg-slate-900 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8 bg-slate-800/50 p-10 rounded-xl shadow-lg border border-slate-700",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:"Student Login"}),e.jsx("p",{className:"mt-2 text-center text-sm text-slate-400",children:"Enter your phone number to proceed."})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:p,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-slate-300",children:"Phone Number"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-slate-400 sm:text-sm",children:"+91"})}),e.jsx("input",{type:"tel",name:"phone",id:"phone",value:t,onChange:n=>u(n.target.value),className:"focus:ring-purple-500 focus:border-purple-500 block w-full pl-12 sm:text-sm border-slate-600 bg-slate-700/50 rounded-md py-3 text-white",placeholder:"98765 43210",required:!0,maxLength:"10"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:i,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:bg-opacity-50",children:i?"Verifying...":"Login / Continue"})})]})]})})};export{w as default};
