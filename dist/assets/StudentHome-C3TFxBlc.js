import{b as j,u as w,r as n,o as v,j as e,m as y,h as N,q as S,c as C,d as x,w as I,g as R,e as k,f as A}from"./index-BjUV0rAk.js";const E=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M16.75 13.96c.25.13.42.2.46.28.08.17.03.56-.09.68-.12.13-.56.54-1.13.72-.45.14-1.03.18-1.48.06-.5-.13-1.03-.38-1.63-.88-.75-.6-1.55-1.48-2.18-2.48-.63-1-1.03-2.04-1.13-2.33-.09-.28-.01-.5.09-.64.1-.14.23-.28.38-.42.14-.13.28-.27.4-.4.13-.14.23-.28.3-.42.08-.14.04-.3-.04-.42-.08-.13-.41-.99-.56-1.36-.15-.38-.3-.33-.44-.33-.13,0-.29,0-.44.04-.15.04-.38.13-.56.33-.18.19-.68.64-.68,1.55,0,.91.68,1.81.78,1.95.09.14,1.35,2.24,3.3,3.02.45.18.81.28,1.09.36.48.13.81.12,1.1.08.34-.04.99-.41,1.13-.82.14-.41.14-.77.09-.88-.05-.1-.2-.18-.44-.3zM12,2C6.48,2,2,6.48,2,12s4.48,10,10,10,10-4.48,10-10S17.52,2,12,2zm0,18c-4.41,0-8-3.59-8-8s3.59-8,8-8,8,3.59,8,8-3.59,8-8,8z"})}),W=()=>e.jsx("div",{className:"bg-slate-900 min-h-screen text-white animate-pulse",children:e.jsxs("div",{className:"max-w-5xl mx-auto py-8 px-4 pt-28",children:[e.jsx("div",{className:"h-8 bg-slate-700 rounded w-64 mb-6"}),e.jsx("div",{className:"space-y-5",children:[...Array(2)].map((o,l)=>e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 p-5 rounded-xl",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"h-6 bg-slate-700 rounded w-1/2"}),e.jsx("div",{className:"h-7 bg-slate-700 rounded-full w-24"})]}),e.jsxs("div",{className:"mt-4 border-t border-slate-700 pt-4",children:[e.jsx("div",{className:"h-4 bg-slate-700 rounded w-3/4 mb-3"}),e.jsx("div",{className:"h-10 bg-slate-700 rounded-lg w-48"})]})]},l))})]})});function Y(){const o=j(),{showNotification:l}=w(),[i,d]=n.useState(null),[c,h]=n.useState([]),[p,m]=n.useState(!0);return n.useEffect(()=>{const s=sessionStorage.getItem("mockUser");if(s){d(JSON.parse(s));return}const t=v(N,r=>{r?d(r):o("/student-login")});return()=>t()},[o]),n.useEffect(()=>{(async()=>{if(i){m(!0);try{const t=S(C(x,"registrations"),I("userId","==",i.uid)),b=(await R(t)).docs.map(a=>({id:a.id,...a.data()})),f=await Promise.all(b.map(async a=>{if(a.courseId==="bundle")return{...a,course:{name:"Combined Course Bundle"}};const g=k(x,"courses",a.courseId),u=await A(g);return{...a,course:u.exists()?u.data():null}}));h(f)}catch(t){console.error("Error fetching student registrations: ",t),l("Could not fetch your registrations.","error")}finally{m(!1)}}})()},[i,l]),p||!i?e.jsx(W,{}):e.jsx("div",{className:"min-h-screen bg-slate-900 text-slate-200",children:e.jsxs("main",{className:"max-w-5xl mx-auto py-8 px-4 pt-28",children:[e.jsx("h3",{className:"text-2xl font-semibold mb-6 text-white",children:"Your Enrolled Courses"}),c.length>0?e.jsx("div",{className:"space-y-5",children:c.map(s=>{var t,r;return e.jsxs(y.div,{className:"bg-slate-800/50 border border-slate-700 p-5 rounded-xl shadow-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-xl text-white",children:((t=s.course)==null?void 0:t.name)||s.courseId.toUpperCase()}),s.isFromBundle&&e.jsx("p",{className:"text-xs font-semibold text-purple-400",children:"(Included in your bundle)"})]}),s.confirmed?e.jsx("span",{className:"mt-2 sm:mt-0 px-3 py-1 text-sm font-semibold text-green-300 bg-green-500/20 rounded-full",children:"Confirmed"}):e.jsx("span",{className:"mt-2 sm:mt-0 px-3 py-1 text-sm font-semibold text-yellow-300 bg-yellow-500/20 rounded-full",children:"Pending Review"})]}),e.jsx("div",{className:"mt-4 border-t border-slate-700 pt-4",children:s.confirmed?e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-300 mb-3",children:"Welcome! You can now join the exclusive WhatsApp group for this course."}),e.jsxs("a",{href:(r=s.course)==null?void 0:r.whatsappLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-green-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-green-700",children:[e.jsx(E,{}),e.jsx("span",{children:"Join WhatsApp Group"})]})]}):e.jsxs("p",{className:"text-sm text-slate-400",children:["We have received your payment of â‚¹",s.amountPaid,". Your registration will be confirmed shortly after we verify the payment."]})})]},s.id)})}):e.jsxs("div",{className:"text-center p-8 border-dashed border-2 border-slate-700 rounded-lg bg-slate-800/50",children:[e.jsx("p",{className:"text-slate-400",children:"You haven't registered for any courses yet."}),e.jsx("button",{onClick:()=>o("/"),className:"mt-4 bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700",children:"View Available Courses"})]})]})})}export{Y as default};
